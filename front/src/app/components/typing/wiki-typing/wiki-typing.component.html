<h2 class="flex justify-center">Type any Wikipedia summary.</h2>
<div class="flex justify-center items-center gap-35">
  <app-switch (switched)="updateRandomSwitch()"
              [blurAfter]="true"
              class="flex justify-center"><span>Random</span></app-switch>
  <div class="flex items-center gap-10">
    <button (click)="updateWikiExtract('drift')"
            [disabled]="!wikiExtracted()"
            class="tsw-button">Drift
    </button>
    <div *ngIf="sessionStatus !== 'inProgress' && wikiExtracted()"
         [@enterAnimation]="true"
         [@leaveAnimation]="true"
         class="flex items-center gap-10">
      <span>or press</span>
      <svg height="40" viewBox="0 0 512 512" width="40" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M499.305 225.353 372.468 98.515c-8.186-8.185-19.069-12.693-30.646-12.693-11.577 0-22.462 4.508-30.646 12.693-8.179 8.177-12.683 19.06-12.683 30.647s4.504 22.47 12.682 30.647l52.851 52.851H43.339C19.443 212.659 0 232.102 0 255.999s19.443 43.341 43.339 43.341h320.687l-52.851 52.851c-16.896 16.897-16.897 44.393 0 61.293 8.187 8.186 19.07 12.694 30.647 12.694 11.575 0 22.459-4.508 30.645-12.694l126.836-126.836C507.491 278.463 512 267.58 512 255.999s-4.509-22.464-12.695-30.646zm-14.426 46.869L358.042 399.061c-4.334 4.334-10.093 6.72-16.221 6.72s-11.889-2.387-16.222-6.719c-8.945-8.947-8.945-23.501 0-32.446l70.263-70.263a10.2 10.2 0 0 0-7.212-17.411H43.339c-12.649 0-22.941-10.291-22.941-22.942s10.292-22.943 22.941-22.943h345.312a10.198 10.198 0 0 0 7.212-17.411l-70.264-70.263c-4.324-4.324-6.706-10.086-6.706-16.222 0-6.136 2.382-11.897 6.706-16.222h.001a22.789 22.789 0 0 1 16.222-6.719 22.795 22.795 0 0 1 16.222 6.719L484.881 239.78a22.785 22.785 0 0 1 6.719 16.221 22.776 22.776 0 0 1-6.721 16.221z"/>
        <path
          d="m403.972 172.762-2.023-2.023c-3.985-3.982-10.441-3.982-14.425 0-3.983 3.984-3.983 10.442 0 14.425l2.023 2.023a10.169 10.169 0 0 0 7.212 2.987c2.61 0 5.22-.995 7.213-2.987 3.983-3.984 3.983-10.442 0-14.425zM476.994 245.784l-53.276-53.275c-3.985-3.982-10.441-3.982-14.425 0-3.983 3.984-3.983 10.442 0 14.425l53.276 53.275a10.169 10.169 0 0 0 7.212 2.987c2.611 0 5.221-.995 7.213-2.987 3.983-3.984 3.983-10.442 0-14.425z"/></svg>
    </div>
  </div>
</div>
<div class="wiki-container">
  <div class="search-container">
    <label *ngIf="!randomActivated; else randomExtractTemplate"
           [@enterAnimation]="true"
           class="relative">
      <svg class="wiki-icon" fill="none" height="20" viewBox="0 0 192 192" width="20"
           xmlns="http://www.w3.org/2000/svg">
        <circle cx="116" cy="76" r="54" stroke="#1B1F1C" stroke-width="12"/>
        <path
          d="M86.5 121.5 41 167c-4.418 4.418-11.582 4.418-16 0v0c-4.418-4.418-4.418-11.582 0-16l44.5-44.5M92 62l12 32 12-32 12 32 12-32"
          stroke="#1B1F1C" stroke-linecap="round" stroke-linejoin="round"
          stroke-width="12"/>
      </svg>
      <input #inputRef
             (keydown.enter)="updateWikiExtract('classic')"
             [(ngModel)]="wikiInput"
             class="wiki-input"
             placeholder="Search for wikipedia summary..."
             type=text>
    </label>
    <ng-template #randomExtractTemplate>
      <div [@enterAnimation]="true" class="flex items-center gap-10">
        <button (click)="updateWikiExtract('random')"
                class="tsw-button">Go
        </button>
        <div *ngIf="sessionStatus !== 'inProgress'"
             [@enterAnimation]="true"
             [@leaveAnimation]="true"
             class="flex items-center gap-10">
          <span [@enterAnimation]="true">or press</span>
          <svg [@enterAnimation]="true" height="45" style="enable-background:new 0 0 122.88 72.42" viewBox="0 0 122.88 72.42" width="45"
               xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M24.59 22.47h15.05v4.12h-9.41v3.07h8.72v3.93h-8.72v3.79h9.69v4.36H24.59V22.47zM15.29 0h92.29c4.21 0 8.03 1.72 10.8 4.49 2.77 2.77 4.49 6.6 4.49 10.8v41.83c0 4.2-1.72 8.02-4.5 10.8-2.77 2.77-6.6 4.5-10.8 4.5H15.29c-4.2 0-8.03-1.72-10.8-4.5A15.216 15.216 0 0 1 0 57.13V15.29c0-4.21 1.72-8.03 4.49-10.8C7.26 1.72 11.09 0 15.29 0zm-12 51.46c.57 2.14 1.71 4.06 3.24 5.59 2.25 2.25 5.35 3.65 8.77 3.65h92.3c.14 0 .27 0 .41-.01l.85-.06c2.91-.3 5.54-1.61 7.51-3.58 1.53-1.53 2.66-3.45 3.23-5.59V15.29c0-3.29-1.35-6.29-3.53-8.47-2.18-2.18-5.17-3.53-8.47-3.53H15.29c-3.3 0-6.3 1.35-8.47 3.53C4.64 9 3.29 12 3.29 15.29v36.17zm39.34-23.69h4.71v2.27c.7-.93 1.41-1.6 2.13-1.99.72-.4 1.59-.6 2.63-.6 1.4 0 2.49.44 3.28 1.32.79.88 1.18 2.24 1.18 4.08v8.88h-5.09v-7.68c0-.88-.15-1.5-.46-1.86-.31-.36-.73-.55-1.28-.55-.61 0-1.1.25-1.48.74-.38.49-.57 1.37-.57 2.64v6.71h-5.06V27.77h.01zm23.06-5.3v5.3h2.77v3.93h-2.77v4.94c0 .59.06.99.16 1.18.17.3.46.44.87.44.37 0 .89-.11 1.57-.34l.37 3.7c-1.25.29-2.42.44-3.5.44-1.26 0-2.19-.17-2.78-.51-.59-.34-1.03-.86-1.32-1.56-.28-.7-.43-1.82-.43-3.38V31.7h-1.86v-3.93h1.86v-2.56l5.06-2.74zm19.83 13.61H75.37c.09.86.31 1.5.66 1.92.49.61 1.13.91 1.92.91.5 0 .97-.13 1.42-.39.28-.17.57-.46.89-.87l4.98.48c-.76 1.4-1.68 2.41-2.76 3.01-1.08.61-2.62.91-4.64.91-1.75 0-3.12-.26-4.13-.78-1-.52-1.83-1.35-2.49-2.48-.66-1.14-.99-2.47-.99-4.01 0-2.18.66-3.95 1.98-5.3 1.32-1.35 3.15-2.03 5.47-2.03 1.89 0 3.38.31 4.47.91a6 6 0 0 1 2.5 2.63c.57 1.15.86 2.64.86 4.49v.6h.01zm-5.14-2.56c-.1-1.04-.36-1.78-.79-2.23-.43-.45-.99-.67-1.69-.67-.81 0-1.45.34-1.93 1.02-.31.42-.5 1.05-.59 1.89h5v-.01zm7.51-5.75h4.74v2.28c.46-.99.93-1.67 1.41-2.04.49-.37 1.08-.56 1.8-.56.75 0 1.57.25 2.45.74l-1.57 3.8c-.6-.26-1.07-.39-1.42-.39-.66 0-1.18.29-1.54.87-.52.82-.78 2.34-.78 4.58v4.69h-5.09V27.77z"/></svg>
        </div>
      </div>
    </ng-template>
  </div>

  <app-loading *ngIf="isLoading"></app-loading>

  <span *ngIf="!isLoading && !wikiExtracted()"
        class="placeholder">Get a Wiki summary and start typing!</span>

  <span *ngIf="!isLoading && wikiExtracted()"
        class="wiki-title">{{ wikiData.title }}</span>

  <app-typing-session (sessionClosed)="terminateSession($event)"
                      (typingDataUpdate)="updateTypingData($event)"
                      *ngIf="!isLoading && wikiExtracted()"
                      [@enterAnimation]="true"
                      [text]="wikiData.extract!"></app-typing-session>

  <app-typing-data *ngIf="!isLoading && wikiExtracted()"
                   [typingData]="typingData"></app-typing-data>

  <div *ngIf="!isAuthenticated() && (sessionStatus === 'closed')"
       [@enterAnimation]="true"
       class="flex items-center gap-10">
    <button (click)="openAuthenticationDialog(true)" class="tsw-button">Log in</button>
    <button (click)="openAuthenticationDialog(false)" class="tsw-button">Sign up</button>
    <span class="font-small">in 1 minute and save your progress!</span>
  </div>
</div>
